aes(x0=55, y0=50000, r=sqrt(tmp$radix), fill=NULL),color='black'
) +
geom_circle(
data=tmp,
aes(x0=55, y0=50000, r=sqrt(tmp$SWE), fill='SWE' ), color='gold', alpha=.70
) +
geom_circle(
data=tmp,
aes(x0=55, y0=50000, r=sqrt(tmp$USA), fill='USA'), color='red', alpha=.70
) +
coord_fixed() +
labs(title=paste('Survivors to age ',this_age),
caption='Source: Human Mortality Database http://mortality.org') +
theme_no_axes() +
scale_fill_manual(values=c('orangered','purple'))
print(G)
}
library(tidyverse)
library(ggforce)
library(data.table)
graphics.off()
windows(record=TRUE)
D = fread('USA SWE male 2016 life tables.txt') %>%
as.data.frame() %>%
select(country, age, lx)
D$age   = 0:110    # make ages numeric
D$radix = 100000   # add radix column
## reorganize (wide)
D = D %>%
spread(key=country, value=lx)
for (this_age in seq(0,110,5)) {
## mini-data with USA SWE and radix as columns, only 1 age
tmp = D %>%
filter(age == this_age)
G = ggplot( ) +
geom_circle(
data=tmp,
aes(x0=55, y0=50000, r=sqrt(tmp$radix), fill=NULL),color='black'
) +
geom_circle(
data=tmp,
aes(x0=55, y0=50000, r=sqrt(tmp$SWE), fill='SWE' ), color='gold', alpha=.70
) +
geom_circle(
data=tmp,
aes(x0=55, y0=50000, r=sqrt(tmp$USA), fill='USA'), color='red', alpha=.70
) +
coord_fixed() +
labs(title=paste('Survivors to age ',this_age),
caption='Source: Human Mortality Database http://mortality.org') +
theme_no_axes() +
scale_fill_manual(values=c('orangered','purple'))
print(G)
}
library(tidyverse)
library(ggforce)
library(data.table)
graphics.off()
windows(record=TRUE)
D = fread('USA SWE male 2016 life tables.txt') %>%
as.data.frame() %>%
select(country, age, lx)
D$age   = 0:110    # make ages numeric
D$radix = 100000   # add radix column
## reorganize (wide)
D = D %>%
spread(key=country, value=lx)
for (this_age in seq(0,110,1)) {
## mini-data with USA SWE and radix as columns, only 1 age
tmp = D %>%
filter(age == this_age)
G = ggplot( ) +
geom_circle(
data=tmp,
aes(x0=55, y0=50000, r=sqrt(tmp$radix), fill=NULL),color='black'
) +
geom_circle(
data=tmp,
aes(x0=55, y0=50000, r=sqrt(tmp$SWE), fill='SWE' ), color='gold', alpha=.70
) +
geom_circle(
data=tmp,
aes(x0=55, y0=50000, r=sqrt(tmp$USA), fill='USA'), color='red', alpha=.70
) +
coord_fixed() +
labs(title=paste('Survivors to age ',this_age),
caption='Source: Human Mortality Database http://mortality.org') +
theme_no_axes() +
scale_fill_manual(values=c('orangered','purple'))
print(G)
}
library(tidyverse)
library(ggforce)
library(data.table)
graphics.off()
windows(record=TRUE)
D = fread('USA SWE male 2016 life tables.txt') %>%
as.data.frame() %>%
select(country, age, lx)
D$age   = 0:110    # make ages numeric
D$radix = 100000   # add radix column
## reorganize (wide)
D = D %>%
spread(key=country, value=lx)
for (this_age in seq(0,110,1)) {
## mini-data with USA SWE and radix as columns, only 1 age
tmp = D %>%
filter(age == this_age)
G = ggplot( ) +
geom_circle(
data=tmp,
aes(x0=55, y0=50000, r=sqrt(tmp$radix), fill=NULL),color='black'
) +
geom_circle(
data=tmp,
aes(x0=55, y0=50000, r=sqrt(tmp$SWE), fill='SWE' ), color='gold', alpha=.20
) +
geom_circle(
data=tmp,
aes(x0=55, y0=50000, r=sqrt(tmp$USA), fill='USA'), color='red', alpha=.20
) +
coord_fixed() +
labs(title=paste('Survivors to age ',this_age),
caption='Source: Human Mortality Database http://mortality.org') +
theme_no_axes() +
scale_fill_manual(values=c('gold','red'))
print(G)
}
library(tidyverse)
library(ggforce)
library(data.table)
graphics.off()
windows(record=TRUE)
D = fread('USA SWE male 2016 life tables.txt') %>%
as.data.frame() %>%
select(country, age, lx)
D$age   = 0:110    # make ages numeric
D$radix = 100000   # add radix column
## reorganize (wide)
D = D %>%
spread(key=country, value=lx)
for (this_age in seq(0,110,1)) {
## mini-data with USA SWE and radix as columns, only 1 age
tmp = D %>%
filter(age == this_age)
G = ggplot( ) +
geom_circle(
data=tmp,
aes(x0=55, y0=50000, r=sqrt(tmp$radix), fill=NULL),color='black'
) +
geom_circle(
data=tmp,
aes(x0=55, y0=50000, r=sqrt(tmp$SWE), fill='SWE' ), color='gold', alpha=.30
) +
geom_circle(
data=tmp,
aes(x0=55, y0=50000, r=sqrt(tmp$USA), fill='USA'), color='red', alpha=.20
) +
coord_fixed() +
labs(title=paste('Survivors to age ',this_age),
caption='Source: Human Mortality Database http://mortality.org') +
theme_no_axes() +
scale_fill_manual(values=c('gold','red'))
print(G)
}
library(tidyverse)
library(ggforce)
library(data.table)
graphics.off()
windows(record=TRUE)
D = fread('USA SWE male 2016 life tables.txt') %>%
as.data.frame() %>%
select(country, age, lx)
D$age   = 0:110    # make ages numeric
D$radix = 100000   # add radix column
## reorganize (wide)
D = D %>%
spread(key=country, value=lx)
for (this_age in seq(0,110,1)) {
## mini-data with USA SWE and radix as columns, only 1 age
tmp = D %>%
filter(age == this_age)
G = ggplot( ) +
geom_circle(
data=tmp,
aes(x0=55, y0=50000, r=sqrt(tmp$radix), fill=NULL),color='black'
) +
geom_circle(
data=tmp,
aes(x0=55, y0=50000, r=sqrt(tmp$SWE), fill='SWE' ), color='gold', alpha=.30
) +
geom_circle(
data=tmp,
aes(x0=55, y0=50000, r=sqrt(tmp$USA), fill='USA'), color='navy', alpha=.20
) +
coord_fixed() +
labs(title=paste('Survivors to age ',this_age),
caption='Source: Human Mortality Database http://mortality.org') +
theme_no_axes() +
scale_fill_manual(values=c('gold','blue'))
print(G)
}
library(tidyverse)
library(ggforce)
library(data.table)
graphics.off()
windows(record=TRUE)
D = fread('USA SWE male 2016 life tables.txt') %>%
as.data.frame() %>%
select(country, age, lx)
D$age   = 0:110    # make ages numeric
D$radix = 100000   # add radix column
## reorganize (wide)
D = D %>%
spread(key=country, value=lx)
for (this_age in seq(0,110,1)) {
## mini-data with USA SWE and radix as columns, only 1 age
tmp = D %>%
filter(age == this_age)
G = ggplot( ) +
geom_circle(
data=tmp,
aes(x0=55, y0=50000, r=sqrt(tmp$radix), fill=NULL),color='black'
) +
geom_circle(
data=tmp,
aes(x0=55, y0=50000, r=sqrt(tmp$SWE), fill='SWE' ), color='gold', alpha=.30
) +
geom_circle(
data=tmp,
aes(x0=55, y0=50000, r=sqrt(tmp$USA), fill='USA'), color='red', alpha=.10
) +
coord_fixed() +
labs(title=paste('Survivors to age ',this_age),
caption='Source: Human Mortality Database http://mortality.org') +
theme_no_axes() +
scale_fill_manual(values=c('gold','red'))
print(G)
}
source('~/GitHub/bonecave/life table circles/circles.R', echo=TRUE)
library(tidyverse)
library(ggforce)
library(data.table)
graphics.off()
windows(record=TRUE)
D = fread('USA SWE male 2016 life tables.txt') %>%
as.data.frame() %>%
select(country, age, lx)
D$age   = 0:110    # make ages numeric
D$radix = 100000   # add radix column
## reorganize (wide)
D = D %>%
spread(key=country, value=lx)
for (this_age in seq(0,110,1)) {
## mini-data with USA SWE and radix as columns, only 1 age
tmp = D %>%
filter(age == this_age)
G = ggplot( ) +
geom_circle(
data=tmp,
aes(x0=55, y0=50000, r=sqrt(tmp$radix), fill=NULL),color='black'
) +
geom_circle(
data=tmp,
aes(x0=55, y0=50000, r=sqrt(tmp$SWE), fill='SWE' ), color='gold', alpha=.30
) +
geom_circle(
data=tmp,
aes(x0=55, y0=50000, r=sqrt(tmp$USA), fill='USA'), color='red', alpha=.10
) +
coord_fixed() +
labs(title=paste0('Survivors to age ',this_age,'\n[Outer Circle = 100,000 male births in each country]'),
caption='Source: Human Mortality Database http://mortality.org',
fill = 'Country') +
theme_no_axes() +
scale_fill_manual(values=c('gold','red'), )
print(G)
}
sqrt(50000)
library(tidyverse)
library(ggforce)
library(data.table)
graphics.off()
windows(record=TRUE)
D = fread('USA SWE male 2016 life tables.txt') %>%
as.data.frame() %>%
select(country, age, lx)
D$age   = 0:110    # make ages numeric
D$radix = 100000   # add radix column
## reorganize (wide)
D = D %>%
spread(key=country, value=lx)
for (this_age in seq(0,110,1)) {
## mini-data with USA SWE and radix as columns, only 1 age
tmp = D %>%
filter(age == this_age)
G = ggplot( ) +
geom_circle(
data=tmp,
aes(x0=55, y0=50000, r=sqrt(tmp$radix), fill=NULL),color='black'
) +
geom_circle(
data=tmp,
aes(x0=55, y0=50000, r=sqrt(tmp$SWE), fill='SWE' ), color='gold', alpha=.30
) +
geom_circle(
data=tmp,
aes(x0=55, y0=50000, r=sqrt(tmp$USA), fill='USA'), color='red', alpha=.10
) +
coord_fixed() +
labs(title=paste0('Survivors to age ',this_age,'\n[Outer Circle = 100,000 male births in each country]'),
caption='Source: Human Mortality Database http://mortality.org',
fill = 'Country') +
#        theme_no_axes() +
scale_fill_manual(values=c('gold','red' ))
print(G)
}
library(tidyverse)
library(ggforce)
library(data.table)
graphics.off()
windows(record=TRUE)
D = fread('USA SWE male 2016 life tables.txt') %>%
as.data.frame() %>%
select(country, age, lx)
D$age   = 0:110    # make ages numeric
D$radix = 100000   # add radix column
## reorganize (wide)
D = D %>%
spread(key=country, value=lx)
for (this_age in seq(0,110,1)) {
## mini-data with USA SWE and radix as columns, only 1 age
tmp = D %>%
filter(age == this_age)
G = ggplot( ) +
geom_circle(
data=tmp,
aes(x0=0, y0=0, r=sqrt(tmp$radix), fill=NULL),color='black'
) +
geom_circle(
data=tmp,
aes(x0=0, y0=0, r=sqrt(tmp$SWE), fill='SWE' ), color='gold', alpha=.30
) +
geom_circle(
data=tmp,
aes(x0=0, y0=0, r=sqrt(tmp$USA), fill='USA'), color='red', alpha=.10
) +
coord_fixed() +
labs(title=paste0('Survivors to age ',this_age,'\n[Outer Circle = 100,000 male births in each country]'),
caption='Source: Human Mortality Database http://mortality.org',
fill = 'Country') +
#        theme_no_axes() +
scale_fill_manual(values=c('gold','red' ))
print(G)
}
filter(D, age==80)
sqrt(62515)
sqrt(51392)
sqrt(100000)
library(tidyverse)
library(ggforce)
library(data.table)
graphics.off()
windows(record=TRUE)
D = fread('USA SWE male 2016 life tables.txt') %>%
as.data.frame() %>%
select(country, age, lx)
D$age   = 0:110    # make ages numeric
D$radix = 100000   # add radix column
## reorganize (wide)
D = D %>%
spread(key=country, value=lx)
for (this_age in seq(0,110,1)) {
## mini-data with USA SWE and radix as columns, only 1 age
tmp = D %>%
filter(age == this_age)
G = ggplot( ) +
geom_circle(
data=tmp,
aes(x0=0, y0=0, r=sqrt(tmp$radix), fill=NULL),color='black'
) +
geom_circle(
data=tmp,
aes(x0=0, y0=0, r=sqrt(tmp$SWE), fill='SWE' ), color='gold', alpha=.30
) +
geom_circle(
data=tmp,
aes(x0=0, y0=0, r=sqrt(tmp$USA), fill='USA'), color='red', alpha=.10
) +
coord_fixed() +
labs(title=paste0('Survivors to age ',this_age,'\n[Outer Circle = 100,000 male births in each country]'),
caption='Source: Human Mortality Database http://mortality.org',
fill = 'Country') +
theme_no_axes() +
scale_fill_manual(values=c('gold','red' ))
print(G)
}
library(tidyverse)
library(ggforce)
library(data.table)
graphics.off()
windows(record=TRUE)
D = fread('USA SWE male 2016 life tables.txt') %>%
as.data.frame() %>%
select(country, age, lx)
D$age   = 0:110    # make ages numeric
D$radix = 100000   # add radix column
## reorganize (wide)
D = D %>%
spread(key=country, value=lx)
for (this_age in seq(0,110,1)) {
## mini-data with USA SWE and radix as columns, only 1 age
tmp = D %>%
filter(age == this_age)
G = ggplot( ) +
geom_circle(
data=tmp,lwd=2,lty=2
aes(x0=0, y0=0, r=sqrt(tmp$radix), fill=NULL),color='black'
) +
geom_circle(
data=tmp,
aes(x0=0, y0=0, r=sqrt(tmp$SWE), fill='SWE' ), color='gold', alpha=.30
) +
geom_circle(
data=tmp,
aes(x0=0, y0=0, r=sqrt(tmp$USA), fill='USA'), color='red', alpha=.10
) +
coord_fixed() +
labs(title=paste0('Survivors to age ',this_age,'\n[Outer Circle = 100,000 male births in each country]'),
caption='Source: Human Mortality Database http://mortality.org',
fill = 'Country') +
theme_no_axes() +
scale_fill_manual(values=c('gold','red' ))
print(G)
}
library(tidyverse)
library(ggforce)
library(data.table)
graphics.off()
windows(record=TRUE)
D = fread('USA SWE male 2016 life tables.txt') %>%
as.data.frame() %>%
select(country, age, lx)
D$age   = 0:110    # make ages numeric
D$radix = 100000   # add radix column
## reorganize (wide)
D = D %>%
spread(key=country, value=lx)
for (this_age in seq(0,110,1)) {
## mini-data with USA SWE and radix as columns, only 1 age
tmp = D %>%
filter(age == this_age)
G = ggplot( ) +
geom_circle(
data=tmp,lwd=2,lty=2,
aes(x0=0, y0=0, r=sqrt(tmp$radix), fill=NULL),color='black'
) +
geom_circle(
data=tmp,
aes(x0=0, y0=0, r=sqrt(tmp$SWE), fill='SWE' ), color='gold', alpha=.30
) +
geom_circle(
data=tmp,
aes(x0=0, y0=0, r=sqrt(tmp$USA), fill='USA'), color='red', alpha=.10
) +
coord_fixed() +
labs(title=paste0('Survivors to age ',this_age,'\n[Outer Circle = 100,000 male births in each country]'),
caption='Source: Human Mortality Database http://mortality.org',
fill = 'Country') +
theme_no_axes() +
scale_fill_manual(values=c('gold','red' ))
print(G)
}
source('~/GitHub/bonecave/life table circles/circles.R', echo=TRUE)
library(tidyverse)
library(ggforce)
library(data.table)
graphics.off()
windows(record=TRUE)
D = fread('USA SWE male 2016 life tables.txt') %>%
as.data.frame() %>%
select(country, age, lx)
D$age   = 0:110    # make ages numeric
D$radix = 100000   # add radix column
## reorganize (wide)
D = D %>%
spread(key=country, value=lx)
for (this_age in seq(0,110,1)) {
## mini-data with USA SWE and radix as columns, only 1 age
tmp = D %>%
filter(age == this_age)
G = ggplot( ) +
geom_circle(
data=tmp,lwd=1,lty=1,
aes(x0=0, y0=0, r=sqrt(tmp$radix), fill=NULL),color='black'
) +
geom_circle(
data=tmp,
aes(x0=0, y0=0, r=sqrt(tmp$SWE), fill='SWE' ), color='gold', alpha=.30
) +
geom_circle(
data=tmp,
aes(x0=0, y0=0, r=sqrt(tmp$USA), fill='USA'), color='red', alpha=.10
) +
coord_fixed() +
labs(title=paste0('Survivors to age ',this_age,'\n[Outer Circle = 100,000 male births in each country]'),
caption='Source: Human Mortality Database http://mortality.org\n2016 mortality rates',
fill = 'Country') +
theme_no_axes() +
scale_fill_manual(values=c('gold','red' ))
print(G)
}
