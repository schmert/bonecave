caption='Source: Human Mortality Database http://mortality.org\n2016 mortality rates',
fill = 'Country') +
theme_no_axes() +
scale_fill_manual(values=c('gold','red' )) +
transition_time(age)
movie = animate(G, fps=4)
# devtools::install_github('thomasp85/gganimate')
library(tidyverse)
library(ggforce)
library(data.table)
library(gganimate)
graphics.off()
windows(record=TRUE)
# D = fread('USA SWE male 2016 life tables.txt') %>%
#        as.data.frame() %>%
#        select(country, age, lx)
#
# D$age   = 0:110    # make ages numeric
# D$radix = 100000   # add radix column
#
# ## reorganize (wide)
# D = D %>%
#   spread(key=country, value=lx)
#
D = fread('USA SWE male 2016 life tables.txt') %>%
as.data.frame() %>%
select(country, age, lx)
D$age   = 0:110    # make ages numeric
D = rbind(D,
expand.grid(country='radix',
age=0:110,
lx=100000)) %>%
arrange(age,country)
G = ggplot( data=D ) +
geom_circle(
data=D,
aes(x0=0, y0=0, r=sqrt(D$lx),
group=country,
fill=country,
color=country),
lwd=1,lty=1)
+
coord_fixed() +
labs(title=paste0('Survivors to age ',D$age,'\n[Outer Circle = 100,000 male births]'),
caption='Source: Human Mortality Database http://mortality.org\n2016 mortality rates',
fill = 'Country') +
theme_no_axes() +
scale_fill_manual(values=c('gold','red' )) +
transition_time(age)
movie = animate(G, fps=4)
anim_save('compare-life-tables-as-circles.gif',
animation=movie )
G = ggplot( ) +
geom_circle(
data=D,
aes(x0=0, y0=0, r=sqrt(D$lx),
group=country,
fill=country,
color=country),
lwd=1,lty=1)
+
coord_fixed() +
labs(title=paste0('Survivors to age ',D$age,'\n[Outer Circle = 100,000 male births]'),
caption='Source: Human Mortality Database http://mortality.org\n2016 mortality rates',
fill = 'Country') +
theme_no_axes() +
scale_fill_manual(values=c('gold','red' )) +
transition_time(age)
# devtools::install_github('thomasp85/gganimate')
library(tidyverse)
library(ggforce)
library(data.table)
library(gganimate)
graphics.off()
windows(record=TRUE)
# D = fread('USA SWE male 2016 life tables.txt') %>%
#        as.data.frame() %>%
#        select(country, age, lx)
#
# D$age   = 0:110    # make ages numeric
# D$radix = 100000   # add radix column
#
# ## reorganize (wide)
# D = D %>%
#   spread(key=country, value=lx)
#
D = fread('USA SWE male 2016 life tables.txt') %>%
as.data.frame() %>%
select(country, age, lx)
D$age   = 0:110    # make ages numeric
D = rbind(D,
expand.grid(country='radix',
age=0:110,
lx=100000)) %>%
arrange(age,country)
G = ggplot( ) +
geom_circle(
data=D,
aes(x0=0, y0=0, r=sqrt(D$lx),
group=country,
fill=country,
color=country),
lwd=1,lty=1) +
coord_fixed() +
labs(title=paste0('Survivors to age ',D$age,'\n[Outer Circle = 100,000 male births]'),
caption='Source: Human Mortality Database http://mortality.org\n2016 mortality rates',
fill = 'Country') +
theme_no_axes() +
scale_fill_manual(values=c('gold','red' )) +
transition_time(age)
movie = animate(G, fps=4)
anim_save('compare-life-tables-as-circles.gif',
animation=movie )
\
G
str(G)
head(D)
G = ggplot( ) +
geom_circle(
data=D,
aes(x0=0, y0=0, r=sqrt(D$lx),
group=country),
lwd=1,lty=1) +
coord_fixed() +
labs(title=paste0('Survivors to age ',D$age,'\n[Outer Circle = 100,000 male births]'),
caption='Source: Human Mortality Database http://mortality.org\n2016 mortality rates',
fill = 'Country') +
theme_no_axes() +
scale_fill_manual(values=c('gold','red','blue' )) +
transition_time(age)
movie = animate(G, fps=4)
G = ggplot( ) +
geom_circle(
data=D,
aes(x0=0, y0=0, r=sqrt(D$lx),
group=country),
lwd=1,lty=1) +
coord_fixed() +
labs(title=paste0('Survivors to age ',D$age,'\n[Outer Circle = 100,000 male births]'),
caption='Source: Human Mortality Database http://mortality.org\n2016 mortality rates',
fill = 'Country') +
theme_no_axes() +
scale_fill_manual(values=c('gold','red','blue' )) +
transition_time(age)
G
G = ggplot( ) +
geom_circle(inherit.aes = FALSE,
data=D,
aes(x0=0, y0=0, r=sqrt(D$lx),
group=country),
lwd=1,lty=1) +
coord_fixed() +
labs(title=paste0('Survivors to age ',D$age,'\n[Outer Circle = 100,000 male births]'),
caption='Source: Human Mortality Database http://mortality.org\n2016 mortality rates',
fill = 'Country') +
theme_no_axes() +
scale_fill_manual(values=c('gold','red','blue' )) +
transition_time(age)
movie = animate(G, fps=4)
?animate
G = ggplot( ) +
geom_circle(inherit.aes = FALSE,
data=D,
aes(x0=0, y0=0, r=sqrt(D$lx),
group=country),
lwd=1,lty=1) +
coord_fixed() +
labs(title=paste0('Survivors to age ',D$age,'\n[Outer Circle = 100,000 male births]'),
caption='Source: Human Mortality Database http://mortality.org\n2016 mortality rates',
fill = 'Country') +
theme_no_axes() +
scale_fill_manual(values=c('gold','red','blue' )) +
transition_time(age)
movie = animate(G, fps=4)
= ggplot( ) +
geom_circle(inherit.aes = FALSE,
data=D,
aes(x0=0, y0=0, r=sqrt(D$lx),
group=country),
lwd=1,lty=1) +
coord_fixed() +
labs(title=paste0('Survivors to age ',D$age,'\n[Outer Circle = 100,000 male births]'),
caption='Source: Human Mortality Database http://mortality.org\n2016 mortality rates',
fill = 'Country') +
theme_no_axes() +
#        scale_fill_manual(values=c('gold','red','blue' )) +
transition_time(age)
G = ggplot( ) +
geom_circle(inherit.aes = FALSE,
data=D,
aes(x0=0, y0=0, r=sqrt(D$lx),
group=country),
lwd=1,lty=1) +
coord_fixed() +
labs(title=paste0('Survivors to age ',D$age,'\n[Outer Circle = 100,000 male births]'),
caption='Source: Human Mortality Database http://mortality.org\n2016 mortality rates',
fill = 'Country') +
theme_no_axes() +
#        scale_fill_manual(values=c('gold','red','blue' )) +
transition_time(age)
G = ggplot( ) +
geom_circle(inherit.aes = FALSE,
data=D,
aes(x0=0, y0=0, r=sqrt(D$lx),
group=country),
lwd=1,lty=1)
G
G = ggplot( ) +
geom_circle(inherit.aes = FALSE,
data=D,
aes(x0=0, y0=0, r=sqrt(D$lx),
group=country, color=country),
lwd=1,lty=1) +
coord_fixed() +
labs(title=paste0('Survivors to age ',D$age,'\n[Outer Circle = 100,000 male births]'),
caption='Source: Human Mortality Database http://mortality.org\n2016 mortality rates',
fill = 'Country') +
theme_no_axes()
G
G = ggplot( ) +
geom_circle(inherit.aes = FALSE,
data=D,
aes(x0=0, y0=0, r=sqrt(D$lx),
group=country, color=country, fill=country,
alpha=country),
lwd=1,lty=1) +
coord_fixed() +
labs(title=paste0('Survivors to age ',D$age,'\n[Outer Circle = 100,000 male births]'),
caption='Source: Human Mortality Database http://mortality.org\n2016 mortality rates',
fill = 'Country') +
theme_no_axes() +
scale_fill_manual(values=c('gold','red','blue' ))
G
G = ggplot( ) +
geom_circle(inherit.aes = FALSE,
data=D,
aes(x0=0, y0=0, r=sqrt(D$lx),
group=country, color=country, fill=country,
alpha=country),
lwd=1,lty=1) +
coord_fixed() +
labs(title=paste0('Survivors to age ',D$age,'\n[Outer Circle = 100,000 male births]'),
caption='Source: Human Mortality Database http://mortality.org\n2016 mortality rates',
fill = 'Country') +
theme_no_axes() +
scale_fill_manual(values=c('gold','red','blue' )) +
transition_time(age)
G
G = ggplot( ) +
geom_circle(inherit.aes = FALSE,
data=D,
aes(x0=0, y0=0, r=sqrt(D$lx),
group=country, color=country, fill=country,
alpha=country),
lwd=1,lty=1) +
coord_fixed() +
labs(title=paste0('Survivors to age ',D$age,'\n[Outer Circle = 100,000 male births]'),
caption='Source: Human Mortality Database http://mortality.org\n2016 mortality rates',
fill = 'Country') +
theme_no_axes() +
scale_fill_manual(values=c('gold','red','blue' )) +
transition_reveal(age)
G
G = ggplot(data=D ) +
geom_circle(inherit.aes = FALSE,
aes(x0=0, y0=0, r=sqrt(D$lx),
group=country, color=country, fill=country,
alpha=country),
lwd=1,lty=1) +
coord_fixed() +
labs(title=paste0('Survivors to age ',D$age,'\n[Outer Circle = 100,000 male births]'),
caption='Source: Human Mortality Database http://mortality.org\n2016 mortality rates',
fill = 'Country') +
theme_no_axes() +
scale_fill_manual(values=c('gold','red','blue' )) +
transition_reveal(age)
G
G = ggplot(data=D ) +
geom_circle(inherit.aes = FALSE,
aes(x0=0, y0=0, r=sqrt(lx),
group=country, color=country, fill=country,
alpha=country),
lwd=1,lty=1) +
coord_fixed() +
labs(title=paste0('Survivors to age ',D$age,'\n[Outer Circle = 100,000 male births]'),
caption='Source: Human Mortality Database http://mortality.org\n2016 mortality rates',
fill = 'Country') +
theme_no_axes() +
scale_fill_manual(values=c('gold','red','blue' )) +
transition_reveal(age)
movie = animate(G, fps=4)
G = ggplot(data=D ) +
geom_circle(inherit.aes = FALSE,
aes(x0=0, y0=0, r=sqrt(lx),
group=country,
color=country,
fill =country,
alpha=country),
lwd=1,lty=1) +
coord_fixed() +
labs(title=paste0('Survivors to age ',D$age,'\n[Outer Circle = 100,000 male births]'),
caption='Source: Human Mortality Database http://mortality.org\n2016 mortality rates',
fill = 'Country') +
theme_no_axes() +
scale_fill_manual(values=c('gold','red','blue' ))
G
movie = animate(G, fps=4)
# devtools::install_github('thomasp85/gganimate')
library(tidyverse)
library(ggforce)
library(data.table)
library(gganimate)
graphics.off()
windows(record=TRUE)
# D = fread('USA SWE male 2016 life tables.txt') %>%
#        as.data.frame() %>%
#        select(country, age, lx)
#
# D$age   = 0:110    # make ages numeric
# D$radix = 100000   # add radix column
#
# ## reorganize (wide)
# D = D %>%
#   spread(key=country, value=lx)
#
D = fread('USA SWE male 2016 life tables.txt') %>%
as.data.frame() %>%
select(country, age, lx)
D$age   = 0:110    # make ages numeric
D = rbind(D,
expand.grid(country='radix',
age=0:110,
lx=100000)) %>%
arrange(age,country)
G = ggplot(data=D ) +
geom_circle(inherit.aes = FALSE,
aes(x0=0, y0=0, r=sqrt(lx),
group=country,
color=country,
fill =country,
alpha=country),
lwd=1,lty=1) +
coord_fixed() +
labs(title=paste0('Survivors to age ',D$age,'\n[Outer Circle = 100,000 male births]'),
caption='Source: Human Mortality Database http://mortality.org\n2016 mortality rates',
fill = 'Country') +
theme_no_axes() +
scale_fill_manual(values=c('gold','red','blue' )) +
transition_reveal(age)
movie = animate(G, fps=4)
anim_save('compare-life-tables-as-circles.gif',
animation=movie )
M = animate(G)
?animate
class(G)
G = ggplot(data=D ) +
geom_circle(inherit.aes = FALSE,
aes(x0=0, y0=0, r=sqrt(lx),
group=country,
color=country,
fill =country,
alpha=country),
lwd=1,lty=1) +
coord_fixed() +
labs(title=paste0('Survivors to age ',D$age,'\n[Outer Circle = 100,000 male births]'),
caption='Source: Human Mortality Database http://mortality.org\n2016 mortality rates',
fill = 'Country') +
theme_no_axes() +
scale_fill_manual(values=c('gold','red','blue' )) +
transition_time(age)
movie = animate(G, fps=4)
G = ggplot(data=D ) +
geom_circle(
aes(x0=0, y0=0, r=sqrt(lx),
group=country,
color=country,
fill =country,
alpha=country),
lwd=1,lty=1) +
coord_fixed() +
labs(title=paste0('Survivors to age ',D$age,'\n[Outer Circle = 100,000 male births]'),
caption='Source: Human Mortality Database http://mortality.org\n2016 mortality rates',
fill = 'Country') +
theme_no_axes() +
scale_fill_manual(values=c('gold','red','blue' )) +
transition_time(age)
movie = animate(G, fps=4)
# devtools::install_github('thomasp85/gganimate')
library(tidyverse)
library(ggforce)
library(data.table)
library(gganimate)
graphics.off()
windows(record=TRUE)
# D = fread('USA SWE male 2016 life tables.txt') %>%
#        as.data.frame() %>%
#        select(country, age, lx)
#
# D$age   = 0:110    # make ages numeric
# D$radix = 100000   # add radix column
#
# ## reorganize (wide)
# D = D %>%
#   spread(key=country, value=lx)
#
D = fread('USA SWE male 2016 life tables.txt') %>%
as.data.frame() %>%
select(country, age, lx)
D$age   = 0:110    # make ages numeric
D = rbind(D,
expand.grid(country='radix',
age=0:110,
lx=100000)) %>%
arrange(age,country)
G = ggplot(data=D ) +
geom_circle(
aes(x0=0, y0=0, r=sqrt(lx),
group=country,
color=country,
fill =country,
alpha=country),
lwd=1,lty=1
) +
coord_fixed() +
labs(title=paste0('Survivors to age ',D$age,'\n[Outer Circle = 100,000 male births]'),
caption='Source: Human Mortality Database http://mortality.org\n2016 mortality rates',
fill = 'Country') +
theme_no_axes() +
scale_fill_manual(values=c('gold','red','blue' )) +
transition_time(age)
movie = animate(G, fps=4)
anim_save('compare-life-tables-as-circles.gif',
animation=movie )
animate
fix(animate)
G = ggplot(data=D,aes(x0=0, y0=0, r=sqrt(lx),
group=country,
color=country,
fill =country,
alpha=country) ) +
geom_circle(lwd=1,lty=1) +
coord_fixed() +
labs(title=paste0('Survivors to age ',D$age,'\n[Outer Circle = 100,000 male births]'),
caption='Source: Human Mortality Database http://mortality.org\n2016 mortality rates',
fill = 'Country') +
theme_no_axes() +
scale_fill_manual(values=c('gold','red','blue' )) +
transition_time(age)
movie = animate(G, fps=4)
G = ggplot(data=D,aes(group=country,
color=country,
fill =country,
alpha=country) ) +
geom_circle(aes(x0=0, y0=0, r=sqrt(lx) ),lwd=1,lty=1) +
coord_fixed() +
labs(title=paste0('Survivors to age ',D$age,'\n[Outer Circle = 100,000 male births]'),
caption='Source: Human Mortality Database http://mortality.org\n2016 mortality rates',
fill = 'Country') +
theme_no_axes() +
scale_fill_manual(values=c('gold','red','blue' )) +
transition_time(age)
movie = animate(G, fps=4)
names(D)
G = ggplot(data=D,aes(group=country,
color=country,
fill =country,
alpha=country,
frame=age) ) +
geom_circle(aes(x0=0, y0=0, r=sqrt(lx) ),lwd=1,lty=1) +
coord_fixed() +
labs(title=paste0('Survivors to age ',D$age,'\n[Outer Circle = 100,000 male births]'),
caption='Source: Human Mortality Database http://mortality.org\n2016 mortality rates',
fill = 'Country') +
theme_no_axes() +
scale_fill_manual(values=c('gold','red','blue' )) +
transition_reveal(age)
G
G = ggplot(data=D,aes(group=country,
color=country,
fill =country,
alpha=country )) +
geom_circle(aes(x0=0, y0=0, r=sqrt(lx) ),lwd=1,lty=1) +
coord_fixed() +
labs(title=paste0('Survivors to age ',D$age,'\n[Outer Circle = 100,000 male births]'),
caption='Source: Human Mortality Database http://mortality.org\n2016 mortality rates',
fill = 'Country') +
theme_no_axes() +
scale_fill_manual(values=c('gold','red','blue' )) +
transition_reveal(age)
G
names(G)
G$data
names(G)
G$layers
G$scales
names(G)
G$transition
names(G)
G$coordinates
G = ggplot(data=D,aes(group=country,
color=country,
fill =country,
alpha=country )) +
geom_circle(aes(x0=0, y0=0, r=sqrt(lx) ),lwd=1,lty=1) +
coord_fixed() +
labs(title=paste0('Survivors to age ',D$age,'\n[Outer Circle = 100,000 male births]'),
caption='Source: Human Mortality Database http://mortality.org\n2016 mortality rates',
fill = 'Country') +
theme_no_axes() +
scale_fill_manual(values=c('gold','red','blue' ))
G
install.packages(c("backports", "BH", "broom", "callr", "classInt", "cowplot", "dplyr", "ggpubr", "git2r", "haven", "httpuv", "httr", "jsonlite", "knitr", "lwgeom", "mapview", "markdown", "openssl", "pdftools", "processx", "ps", "raster", "RcppEigen", "readr", "readxl", "remotes", "rgeos", "RJSONIO", "rlang", "rmarkdown", "rstan", "sf", "shiny", "spData", "StanHeaders", "tmap", "units"))
